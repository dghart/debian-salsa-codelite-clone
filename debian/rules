#!/usr/bin/make -f

include /usr/share/cdbs/1/rules/debhelper.mk
include /usr/share/cdbs/1/class/autotools.mk
include /usr/share/cdbs/1/rules/patchsys-quilt.mk

install/codelite::
	cd "$(DEB_SRCDIR)/debian/codelite"
	find "$(DEB_SRCDIR)/debian/codelite/usr/share" -type f -exec chmod 0644 '{}' \;
	
	mkdir -p "$(DEB_SRCDIR)"/debian/codelite/usr/lib/codelite/plugins
	mkdir -p "$(DEB_SRCDIR)"/debian/codelite/usr/lib/codelite/debuggers
	mv "$(DEB_SRCDIR)"/debian/codelite/usr/share/codelite/plugins/*.so \
	   "$(DEB_SRCDIR)"/debian/codelite/usr/lib/codelite/plugins
	mv "$(DEB_SRCDIR)"/debian/codelite/usr/share/codelite/debuggers/*.so \
	   "$(DEB_SRCDIR)"/debian/codelite/usr/lib/codelite/debuggers
	
	( cd "$(DEB_SRCDIR)"/debian/codelite/usr/share/codelite/plugins; \
	ln -s ../../../lib/codelite/plugins/*.so . )
	
	( cd "$(DEB_SRCDIR)"/debian/codelite/usr/share/codelite/debuggers; \
	ln -s ../../../lib/codelite/debuggers/*.so . )
clean::
	find "$(DEB_SRCDIR)" -name Makefile ! -wholename '*sdk*' -delete
	rm -f "$(DEB_SRCDIR)"/fakeroot/DEBIAN/control
