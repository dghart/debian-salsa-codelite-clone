Origin: Ubuntu
Bug-Ubuntu: https://bugs.launchpad.net/bugs/511375
Description: Fix codelite_indexer path.
---
 CodeLite/unixprocess_impl.cpp |    6 ++----
 LiteEditor/frame.cpp          |    2 +-
 LiteEditor/manager.cpp        |    2 +-
 Plugin/pipedprocess.cpp       |    3 +--
 cppchecker/cppchecker.cpp     |    3 +--
 5 files changed, 6 insertions(+), 10 deletions(-)

--- codelite.orig/LiteEditor/manager.cpp
+++ codelite/LiteEditor/manager.cpp
@@ -1256,7 +1256,7 @@ wxString Manager::GetProjectExecutionCom
 		if ( bldConf->GetPauseWhenExecEnds() ) {
 			wxString ld_lib_path;
 			wxFileName exePath ( wxStandardPaths::Get().GetExecutablePath() );
-			wxFileName exeWrapper ( exePath.GetPath(), wxT ( "codelite_exec" ) );
+			wxFileName exeWrapper ( wxStandardPaths::Get().GetPluginsDir(), wxT ( "codelite_exec" ) );
 
 			if ( wxGetEnv ( wxT ( "LD_LIBRARY_PATH" ), &ld_lib_path ) && ld_lib_path.IsEmpty() == false ) {
 				command << wxT ( "/bin/sh -f " ) << exeWrapper.GetFullPath() << wxT ( " LD_LIBRARY_PATH=" ) << ld_lib_path << wxT ( " " );
--- codelite.orig/LiteEditor/frame.cpp
+++ codelite/LiteEditor/frame.cpp
@@ -804,7 +804,7 @@ void clMainFrame::CreateGUIControls(void
 #else
 	// set the path to codelite_indexer
 	wxFileName exePath( wxStandardPaths::Get().GetExecutablePath() );
-	tagsManager->SetCodeLiteIndexerPath(exePath.GetPath());
+	tagsManager->SetCodeLiteIndexerPath(wxStandardPaths::Get().GetPluginsDir());
 	ManagerST::Get()->SetCodeLiteLauncherPath(exePath.GetPath());
 #endif
 	tagsManager->StartCodeLiteIndexer();
--- codelite.orig/Plugin/pipedprocess.cpp
+++ codelite/Plugin/pipedprocess.cpp
@@ -54,8 +54,7 @@ void PipedProcess::Terminate()
 {
 #ifdef __WXGTK__
 	wxString cmd;
-	wxFileName exePath(wxStandardPaths::Get().GetExecutablePath());
-	wxFileName script(exePath.GetPath(), wxT("codelite_kill_children"));
+	wxFileName script(wxStandardPaths::Get().GetPluginsDir(), wxT("codelite_kill_children"));
 	cmd << wxT("/bin/sh -f ") << script.GetFullPath() << wxT(" ") << GetPid();
 	wxExecute(cmd, wxEXEC_ASYNC);
 #else
--- codelite.orig/cppchecker/cppchecker.cpp
+++ codelite/cppchecker/cppchecker.cpp
@@ -430,8 +430,7 @@ wxString CppCheckPlugin::DoGetCommand()
 	path = wxStandardPaths::Get().GetDataDir();
 
 #else // Linux / Windows
-	wxFileName exePath( wxStandardPaths::Get().GetExecutablePath() );
-	path = exePath.GetPath();
+	path = wxStandardPaths::Get().GetPluginsDir();
 
 #endif
 
--- codelite.orig/CodeLite/unixprocess_impl.cpp
+++ codelite/CodeLite/unixprocess_impl.cpp
@@ -238,8 +238,7 @@ void UnixProcessImpl::Cleanup()
 	// Kill the child process
 	if ( IsAlive() ) {
 		wxString cmd;
-		wxFileName exePath(wxStandardPaths::Get().GetExecutablePath());
-		wxFileName script(exePath.GetPath(), wxT("codelite_kill_children "));
+		wxFileName script(wxStandardPaths::Get().GetPluginsDir(), wxT("codelite_kill_children "));
 		cmd << wxT("/bin/sh -f ") << script.GetFullPath();
 		cmd << GetPid();
 
@@ -387,8 +386,7 @@ void UnixProcessImpl::Terminate()
 	// Kill the child process
 	if ( IsAlive() ) {
 		wxString cmd;
-		wxFileName exePath(wxStandardPaths::Get().GetExecutablePath());
-		wxFileName script(exePath.GetPath(), wxT("codelite_kill_children "));
+		wxFileName script(wxStandardPaths::Get().GetPluginsDir(), wxT("codelite_kill_children "));
 		cmd << wxT("/bin/sh -f ") << script.GetFullPath();
 		cmd << GetPid();
 
